# SECRET

## ðŸ“Œ Notes
- **Secret** is used to store sensitive data like passwords, tokens, and keys.  
- Data in Secrets must be **base64 encoded**.  
- In this example, we create a secret with a username and password, and then mount it inside a Pod as files.  

## ðŸ”‘ Secret Manifest
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-secret
type: Opaque
data:
  username: cGFuZGFjbG91ZA==      # base64-encoded 
  password: cGFuZGFjbG91ZEA5OTk=  # base64-encoded
````

## ðŸ“¦ Pod Manifest (using Secret as Volume)
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: mypod
spec:
  containers:
    - name: c1
      image: httpd:latest
      volumeMounts:
        - name: secret-volume
          mountPath: /etc/secrets
  volumes:
    - name: secret-volume
      secret:
        secretName: my-secret   # must match the Secret name
```

The data in secrets will be displayed in sizes
```bash
kubectl describe secret my-secret
```
Output
```bash
Name:         my-secret
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
password:  8 bytes
username:  8 bytes
```

## ðŸ“‚ Inside the Container
Once the Pod is running, the secret will be available as files under `/etc/secrets`:

```bash
kubectl exec -it mypod -- ls /etc/secrets
```
```bash
# Output:
# username
# password
```

To view the decoded values:
```bash
kubectl exec -it mypod -- cat /etc/secrets/username
```
```bash
kubectl exec -it mypod -- cat /etc/secrets/password
```

Delete the secrets
```bash
kubectl delete -f secret.yaml
```

