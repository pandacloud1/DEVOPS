# 🛰️ SERVICE
## 📌 Tips for using Service Manifest
Think of the phrase: **"The Service Provider" (T, S, P)**  
1. **T → type** (ClusterIP, NodePort, LoadBalancer)  
2. **S → selector** (must match Deployment labels)  
3. **P → ports** (`port` and `targetPort`)  

here
- `port` = Service port number (exposed by Service)  
- `targetPort` = Pod’s container port number  
- Always match `selector` with Deployment’s pod labels  

## 🔹 Service - NodePort

```yaml
apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  type: NodePort
  selector:
    name: my-pod1
  ports:
    - protocol: TCP
      port: 80             # Service Port     
      targetPort: 80       # Pod Port
      NodePort: 31000      # Node Port (30,000 - 32,767)
````

## 🔹 Service - LoadBalancer

```yaml
apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  type: LoadBalancer
  selector:
    name: my-pod1
  ports:
    - protocol: TCP
      port: 80             # Service Port     
      targetPort: 80       # Pod Port
````


## 🔹 Apply Service Manifest

```bash
kubectl apply -f service.yaml
```

Check if the service is created:

```bash
kubectl get svc
```

Sample Output:

```
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
my-service   NodePort    10.96.10.134   <none>        80:31892/TCP   1m
```

## 🔹 Test Service

1. On EKS or Kubernetes cluster:

   ```bash
   curl localhost:<nodeport>
   ```

2. From Browser:
   👉 Open `http://<EC2-Node-PublicIP>:<NodePort>`

   ✅ You should see your app running.

## 🔹 Important Notes

1. `ClusterIP` gets **automatically created** along with NodePort.

   * Used for internal cluster communication.
   * Default behavior.

2. To verify the service:

   ```bash
   kubectl describe svc my-service
   ```

## 🔹 For Minikube Users

1. Open a separate terminal and run:

   ```bash
   minikube tunnel
   ```

   This will allow external networking.

2. Then test:

   ```bash
   curl <NodePort-IP>
   ```

## 📝 Summary

* **Deployment** creates pods.
* **Service** exposes pods inside/outside the cluster.
* Use `T, S, P` rule: **type, selector, ports**.
* For external access: `NodePort` or `LoadBalancer`.

```





