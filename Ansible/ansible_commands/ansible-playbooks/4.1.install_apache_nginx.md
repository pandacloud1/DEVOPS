# Install apache in "webservers & nginx in "dbservers"
Ref: https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-open-source/#installing-prebuilt-rhel-centos-oracle-linux-almalinux-rocky-linux-packages <br>
Ref: https://stackoverflow.com/questions/57784287/how-to-install-nginx-on-aws-ec2-linux-2

## Ubuntu
```sh
vi install-apache-nginx.yaml
```
```yaml
---
- name: Install Apache on webservers
  hosts: webservers
  become: true
  tasks:
  - name: Install Apache package
    apt:
      name: apache2
      state: present                

  - name: Start Apache service
    service:
      name: apache2
      state: started

- name: Install Nginx on dbservers
  hosts: dbservers
  become: true
  tasks:
  - name: Install Nginx package
    apt:
      name: nginx
      state: present

  - name: Start Nginx service
    service:
      name: nginx
      state: started
...
```
```sh
ansible-playbook install-apache-nginx.yaml
```

1. Verify apache is installed in 'Node1', run below command in Master
```sh
ansible webservers -a 'service apache2 status'
```
2. Verify nginx is installed in 'Node2', run below command in Master
```sh
ansible dbservers -a 'service nginx status'
```

## Amazon Linux
```sh
vi install-apache-nginx.yaml
```
```yaml
---
- name: Install Apache on webservers
  hosts: webservers
  become: true
  tasks:
  - name: Install Apache package
    yum:
      name: httpd
      state: installed                # we can also use 'state: present'

  - name: Start Apache service
    service:
      name: httpd
      state: started

- name: Install Nginx on dbservers
  hosts: dbservers
  become: true
  tasks:
  - name: Enable Nginx repository
    command: amazon-linux-extras enable nginx1

  - name: Install Nginx package
    yum:
      name: nginx
      state: installed

  - name: Start Nginx service
    service:
      name: nginx
      state: started
...
```
```sh
ansible-playbook install-apache-nginx.yaml
```

1. Verify apache is installed in 'Node1', run below command in Master
```sh
ansible webservers -a 'service httpd status'
```
2. Verify nginx is installed in 'Node2', run below command in Master
```sh
ansible dbservers -a 'service nginx status'
```
