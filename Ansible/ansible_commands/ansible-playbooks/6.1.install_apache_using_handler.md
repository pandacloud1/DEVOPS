# Install Apache using handlers
Note:
1. Handlers are tasks that are triggered only when notified by other tasks.
2. They are used for tasks that need to run only if something changes.
3. Eg: Restarting a service after a certain task, or starting a service after the service is installed, etc.

## Ubuntu
```sh
vi handlers.yaml
```
```yaml
---
- name: connecting tasks using handlers
  hosts: all
  become: true
  tasks: 
  - name: install-apache-task
    apt:
      name: apache2
      state: present
    notify: start-apache-handler

  handlers: 
  - name: start-apache-handler
    service:
      name: apache2
      state: started
...
```
```sh
ansible-playbook handlers.yaml
```
Verify installation
```sh
ansible all -a "service apache2 status"
```

Uninstall
```sh
ansible all -a "sudo apt remove -y apache2"
```

## Amazon Linux
```sh
vi handlers.yaml
```
```yaml
---
- name: connecting tasks using handlers
  hosts: all
  become: true
  tasks: 
  - name: install-apache-task
    yum:
      name: httpd
      state: present
    notify: start-apache-handler

  handlers: 
  - name: start-apache-handler
    service:
      name: httpd
      state: started
...
```
```sh
ansible-playbook handlers.yaml
```
Verify installation
```sh
ansible all -a "service httpd status"
```
Uninstall
```sh
ansible all -a "sudo yum remove -y httpd"
```
