# Shell Module
## Playbook to run shell script file on nodes
* First create a file 'file1.sh' in the nodes
```sh
vi shell.yaml
```
```yaml

---
- name: shell module
  hosts: <host IP>
  become: true
  tasks:
  - name: run shell script in nodes
    shell: /tmp/file1.sh
...
```
```sh
ansible-playbook shell.yaml
```

## Playbook to find, register & kill process
* Store (register) process in a variable & kill processes individually
```sh
vi process.yaml
```
```yaml
--- 
- name: find, register & kill processes
  hosts: all
  become: true
  tasks:
  - name: find & register a process
    ignore_errors: yes
    shell: "ps -aux | grep <process> | grep -v grep | awk '{print $2}'"
    register: myprocess

  - name: kill each process individually
    ignore_errors: yes
    shell: "kill {{ item }}"
    with_items: "{{ myprocess.stdout_lines }}"
...
```
```sh
ansible-playbook process.yaml
```
