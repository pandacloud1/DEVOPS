# INSTALL NGINX IN WEBSERVERS & MYSQL IN DBSERVERS

```sh
vi install-nginx-mysql.yaml
```
```yaml
---
- name: Install Nginx on webservers
  hosts: webservers
  become: true
  tasks:
    - name: Enable Nginx repository
      command: amazon-linux-extras enable nginx1
      # For other Linux distributions, you may need different commands to enable the repo.

    - name: Install Nginx package
      yum:
        name: nginx
        state: installed

    - name: Start Nginx service
      service:
        name: nginx
        state: started
        enabled: true

- name: Install MySQL on dbservers
  hosts: dbservers
  become: true
  tasks:
    - name: Install MySQL repository
      command: amazon-linux-extras install mysql8.0
      # For other Linux distributions, you might need to configure the MySQL repo differently.

    - name: Install MySQL package
      yum:
        name: mysql-server
        state: installed

    - name: Start MySQL service
      service:
        name: mysqld
        state: started
        enabled: true
...
```
```sh
ansible-playbook install-nginx-mysql.yaml
```
Verify nginx installation in Nodes using `service nginx status`
Verify mysql installation in Nodes using `mysql --version`

## Error Msg
You may sometimes get below error
`Error accessing repos: File contains no section headers.\nfile: file:///etc/yum.repos.d/mysql57-community.repo, line: 1\n'Not found\\n'"}" for this playbook`

Run below commands in your node
Remove the current mysql57-community.repo file and download the correct MySQL repository configuration file
```sh
sudo rm -f /etc/yum.repos.d/mysql57-community.repo
sudo yum install https://repo.mysql.com/mysql57-community-release-el7.rpm
```
Clear the Yum Cache
```sh
sudo yum clean all
sudo yum makecache
```
