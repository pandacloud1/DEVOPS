# USING HANDLERS
Note:
* Handlers are tasks that are triggered only when notified by other tasks.
* They are used for tasks that need to run only if something changes.
* Eg: Restarting a service after a certain task, or starting a service after the service is installed, etc.

## INSTALL APACHE
For Ubuntu
```sh
vi handlers.yaml
```
```yaml
---
- name: connecting tasks using handlers
  hosts: all
  become: true
  tasks: 
  - name: install-apache-task
    apt:
      name: apache2
      state: present
    notify: start-apache-handler

  handlers: 
  - name: start-apache-handler
    service:
      name: apache2
      state: started
...
```
```sh
ansible-playbook handlers.yaml
```
Verify installation
```sh
ansible all -a "service apache2 status"
```

Uninstall
```sh
ansible all -a "sudo apt remove -y apache2"
```

For Amazon Linux
```sh
vi handlers.yaml
```
```yaml
---
- name: connecting tasks using handlers
  hosts: all
  become: true
  tasks: 
  - name: install-apache-task
    yum:
      name: httpd
      state: present
    notify: start-apache-handler

  handlers: 
  - name: start-apache-handler
    service:
      name: httpd
      state: started
...
```
```sh
ansible-playbook handlers.yaml
```
Verify installation
```sh
ansible all -a "service httpd status"
```
Uninstall
```sh
ansible all -a "sudo yum remove -y httpd"
```

## INSTALL GIT & UPDATE THE OS USING `handlers`

```sh
vi git.yaml
```
```yaml
---
- name: git.yml
  become: true
  hosts: all
  tasks:
  - name: install-git
    yum:
     name: git
     state: installed
    notify: os-update

  handlers:
  - name: os-update
    yum:
     state: latest
...
```
```sh
ansible-playbook git.yaml
```
